[{"name":"app.R","content":"# app.R — Materialize + Icons / レスポンシブ最適化版（スマホ対応・サイドナビ）+ あなたの画像を使用\r\nlibrary(shiny)\r\n\r\nui <- fluidPage(\r\n  tags$head(\r\n    # スマホ倍率のズレ防止\r\n    tags$meta(name=\"viewport\", content=\"width=device-width, initial-scale=1.0\"),\r\n    \r\n    # Materialize & Icons\r\n    tags$link(rel=\"stylesheet\",\r\n              href=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css\"),\r\n    tags$script(src=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js\"),\r\n    tags$link(href=\"https://fonts.googleapis.com/icon?family=Material+Icons\", rel=\"stylesheet\"),\r\n    \r\n    # ===== Responsive CSS =====\r\n    tags$style(HTML(\"\r\n      body { letter-spacing:.2px; }\r\n      /* タイトルが重ならないように段階的に調整 */\r\n      .brand-logo { font-weight:700; white-space:nowrap; font-size:28px; }\r\n      @media (max-width:1200px){ .brand-logo { font-size:24px; } }\r\n      @media (max-width:992px) { .brand-logo { font-size:22px; } }\r\n      @media (max-width:600px) { .brand-logo { font-size:20px; } }\r\n\r\n      .hero {\r\n        border-radius:18px; padding:24px;\r\n        background:\r\n          radial-gradient(800px 400px at 10% 0%, rgba(0,151,167,.18), rgba(0,151,167,0) 55%),\r\n          radial-gradient(700px 350px at 90% 10%, rgba(0,172,193,.16), rgba(0,172,193,0) 50%),\r\n          linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,0));\r\n        box-shadow:0 16px 48px rgba(0,0,0,.08);\r\n        margin-top:18px;\r\n      }\r\n      .hero h4 { font-weight:700; line-height:1.25; font-size:clamp(20px, 3.2vw, 32px); }\r\n\r\n      .avatar { width:96px; height:96px; border-radius:50%; object-fit:cover;\r\n                box-shadow:0 8px 26px rgba(0,0,0,.22); }\r\n\r\n      .chips .chip { background:#E0F7FA; color:#007B83; font-weight:600; white-space:nowrap; margin:4px 6px 4px 0; }\r\n      .superlink { display:flex; align-items:center; gap:12px; padding:14px 16px; border-radius:14px;\r\n                   background:#fff; border:1px solid rgba(0,0,0,.06); box-shadow:0 8px 24px rgba(0,0,0,.06);\r\n                   transition: transform .2s ease, box-shadow .2s ease; }\r\n      .superlink:hover { transform:translateY(-2px); box-shadow:0 14px 30px rgba(0,0,0,.12); }\r\n      .muted { color:#607d8b; }\r\n      .card { border-radius:16px; }\r\n      .site-footer { color:#78909c; font-size:13px; margin:28px 0 18px; }\r\n\r\n      /* タブ：横スクロールで崩れ防止 */\r\n      .tabs { overflow-x:auto; white-space:nowrap; -webkit-overflow-scrolling:touch; }\r\n      .tabs .tab { display:inline-block; }\r\n      .tabs .tab a { font-size:13px; padding:0 12px; }\r\n\r\n      /* フェード（“ページ遷移”っぽく） */\r\n      .fade-pane { opacity:0; transform:translateY(8px); transition:opacity .35s ease, transform .35s ease; }\r\n      .fade-pane.show { opacity:1; transform:translateY(0); }\r\n\r\n      @media (max-width:360px){\r\n        .tabs .tab a { font-size:12px; padding:0 10px; }\r\n        .avatar{width:84px;height:84px;}\r\n        .hero { padding:18px; }\r\n      }\r\n\r\n      /* サイドナビ（中小画面） */\r\n      .sidenav { width:260px; }\r\n    \")),\r\n    \r\n    # ===== JS: Tabs/Sidenav初期化 & ヘッダー/サイドからタブ遷移 =====\r\n    tags$script(HTML(\"\r\n      document.addEventListener('DOMContentLoaded', function(){\r\n        var tabsEl = document.querySelector('.tabs');\r\n        var tabsInstance = tabsEl ? M.Tabs.init(tabsEl, {}) : null;\r\n\r\n        // FAB\r\n        var fabs = document.querySelectorAll('.fixed-action-btn');\r\n        M.FloatingActionButton.init(fabs, {hoverEnabled:false});\r\n\r\n        // Sidenav（右から出す）\r\n        var sidenavs = document.querySelectorAll('.sidenav');\r\n        M.Sidenav.init(sidenavs, {edge:'right'});\r\n\r\n        // 初回フェード\r\n        setTimeout(function(){\r\n          document.querySelectorAll('.fade-pane').forEach(function(el){ el.classList.add('show'); });\r\n        }, 60);\r\n\r\n        // タブ切替後のフェード\r\n        if (tabsEl) {\r\n          tabsEl.querySelectorAll('a').forEach(function(a){\r\n            a.addEventListener('click', function(){\r\n              setTimeout(function(){\r\n                document.querySelectorAll('.fade-pane').forEach(function(el){ el.classList.add('show'); });\r\n              }, 80);\r\n            });\r\n          });\r\n        }\r\n\r\n        // 右上ヘッダーからタブ選択\r\n        document.querySelectorAll('nav a[href^=\\\"#\\\"]').forEach(function(a){\r\n          a.addEventListener('click', function(ev){\r\n            var id = (this.getAttribute('href')||'').replace('#','');\r\n            if(!id || !tabsInstance) return;\r\n            ev.preventDefault();\r\n            tabsInstance.select(id);\r\n            var y = tabsEl.getBoundingClientRect().top + window.scrollY - 8;\r\n            window.scrollTo({ top: y, behavior:'smooth' });\r\n          });\r\n        });\r\n\r\n        // サイドナビからタブ選択（閉じてからスクロール）\r\n        document.querySelectorAll('#mobile-menu a[href^=\\\"#\\\"]').forEach(function(a){\r\n          a.addEventListener('click', function(ev){\r\n            var id = (this.getAttribute('href')||'').replace('#','');\r\n            if(!id || !tabsInstance) return;\r\n            ev.preventDefault();\r\n            tabsInstance.select(id);\r\n            var sn = M.Sidenav.getInstance(document.getElementById('mobile-menu'));\r\n            if(sn) sn.close();\r\n            var y = tabsEl.getBoundingClientRect().top + window.scrollY - 8;\r\n            window.scrollTo({ top: y, behavior:'smooth' });\r\n          });\r\n        });\r\n      });\r\n    \"))\r\n  ),\r\n  \r\n  # ===== ヘッダー（大画面は右上メニュー／中小はハンバーガーに切替） =====\r\n  tags$nav(class=\"nav-wrapper teal\",\r\n           div(class=\"container\",\r\n               tags$a(href=\"#home\", class=\"brand-logo\", \"ジョーソンランド\"),\r\n               # 大画面メニュー\r\n               tags$ul(class=\"right hide-on-med-and-down\",\r\n                       tags$li(tags$a(href=\"#home\",    tags$i(class=\"material-icons left\", \"home\"),   \"Home\")),\r\n                       tags$li(tags$a(href=\"#works\",   tags$i(class=\"material-icons left\", \"work\"),   \"Works\")),\r\n                       tags$li(tags$a(href=\"#about\",   tags$i(class=\"material-icons left\", \"person\"), \"About\")),\r\n                       tags$li(tags$a(href=\"#contact\", tags$i(class=\"material-icons left\", \"send\"),   \"Contact\"))\r\n               ),\r\n               # 中小画面：ハンバーガー\r\n               tags$a(href=\"#\", class=\"sidenav-trigger right hide-on-large-only\",\r\n                      `data-target`=\"mobile-menu\",\r\n                      tags$i(class=\"material-icons\", \"menu\"))\r\n           )\r\n  ),\r\n  \r\n  # ===== サイドナビ（モバイル） =====\r\n  tags$ul(id=\"mobile-menu\", class=\"sidenav right-aligned\",\r\n          tags$li(tags$a(href=\"#home\",    tags$i(class=\"material-icons left\", \"home\"),   \"Home\")),\r\n          tags$li(tags$a(href=\"#works\",   tags$i(class=\"material-icons left\", \"work\"),   \"Works\")),\r\n          tags$li(tags$a(href=\"#about\",   tags$i(class=\"material-icons left\", \"person\"), \"About\")),\r\n          tags$li(tags$a(href=\"#contact\", tags$i(class=\"material-icons left\", \"send\"),   \"Contact\"))\r\n  ),\r\n  \r\n  # ===== タブ（横スクロール対応） =====\r\n  div(class=\"container\",\r\n      tags$ul(class=\"tabs\",\r\n              tags$li(class=\"tab col s3\", tags$a(href=\"#home\",    \"Home\")),\r\n              tags$li(class=\"tab col s3\", tags$a(href=\"#works\",   \"Works\")),\r\n              tags$li(class=\"tab col s3\", tags$a(href=\"#about\",   \"About\")),\r\n              tags$li(class=\"tab col s3\", tags$a(href=\"#contact\", \"Contact\"))\r\n      )\r\n  ),\r\n  \r\n  # ===== Home =====\r\n  div(id=\"home\", class=\"container\",\r\n      div(class=\"fade-pane\",\r\n          div(class=\"hero\",\r\n              div(class=\"row valign-wrapper\",\r\n                  div(class=\"col s12 m2 center\",\r\n                      # ★ あなたの画像（raw URL で直接表示）\r\n                      tags$img(\r\n                        src = \"https://raw.githubusercontent.com/castella3/castella3.github.io/main/images/IMG_5739.jpg\",\r\n                        class = \"avatar\", alt = \"プロフィール画像\"\r\n                      )\r\n                      # もしくは www/images/avatar.jpg に置いた場合：\r\n                      # tags$img(src = \"images/avatar.jpg\", class = \"avatar\", alt = \"プロフィール画像\")\r\n                  ),\r\n                  div(class=\"col s12 m10\",\r\n                      tags$h4(\"Hi, I'm ジョーソンランド\"),\r\n                      p(\"心理統計の大学院生です。自由記述の飽和推定、LNRE（fZM）・再捕獲法の比較、R/Shiny・Stan を使った可視化に取り組んでいます。\"),\r\n                      div(class=\"chips\",\r\n                          span(class=\"chip\",\"R/Shiny\"),\r\n                          span(class=\"chip\",\"LNRE / Zipf\"),\r\n                          span(class=\"chip\",\"Capture–Recapture\"),\r\n                          span(class=\"chip\",\"Psychometrics\")\r\n                      ),\r\n                      tags$br(),\r\n                      div(class=\"row\",\r\n                          div(class=\"col s12 m4\",\r\n                              tags$a(href=\"#about\", class=\"btn waves-effect waves-light teal\",\r\n                                     tags$i(class=\"material-icons left\", \"person\"), \"自己紹介\")),\r\n                          div(class=\"col s12 m4\",\r\n                              tags$a(href=\"#works\", class=\"btn waves-effect waves-light white teal-text text-darken-2\",\r\n                                     style=\"border:1px solid rgba(0,0,0,.12);\",\r\n                                     tags$i(class=\"material-icons left\", \"work\"), \"作品・研究\")),\r\n                          div(class=\"col s12 m4\",\r\n                              tags$a(href=\"#contact\", class=\"btn waves-effect waves-light white teal-text text-darken-2\",\r\n                                     style=\"border:1px solid rgba(0,0,0,.12);\",\r\n                                     tags$i(class=\"material-icons left\", \"send\"), \"連絡\"))\r\n                      )\r\n                  )\r\n              )\r\n          ),\r\n          \r\n          tags$h5(tags$i(class=\"material-icons tiny\", \"link\"), \" SNS / Links\"),\r\n          div(class=\"row\",\r\n              div(class=\"col s12 m6 l3\",\r\n                  tags$a(class=\"superlink\", href=\"https://github.com/castella3\", target=\"_blank\",\r\n                         tags$i(class=\"material-icons\", \"code\"),\r\n                         div(tags$div(\"GitHub\", style=\"font-weight:700;\"),\r\n                             tags$div(\"コード・リポジトリ\", class=\"muted\")))),\r\n              div(class=\"col s12 m6 l3\",\r\n                  tags$a(class=\"superlink\", href=\"https://x.com/dkamimura0\", target=\"_blank\",\r\n                         tags$i(class=\"material-icons\", \"chat\"),\r\n                         div(tags$div(\"X (Twitter)\", style=\"font-weight:700;\"),\r\n                             tags$div(\"研究メモ・日々の投稿\", class=\"muted\")))),\r\n              div(class=\"col s12 m6 l3\",\r\n                  tags$a(class=\"superlink\", href=\"https://www.linkedin.com/in/yourname\", target=\"_blank\",\r\n                         tags$i(class=\"material-icons\", \"badge\"),\r\n                         div(tags$div(\"LinkedIn\", style=\"font-weight:700;\"),\r\n                             tags$div(\"職務経歴・スキル\", class=\"muted\")))),\r\n              div(class=\"col s12 m6 l3\",\r\n                  tags$a(class=\"superlink\", href=\"mailto:you@example.com\",\r\n                         tags$i(class=\"material-icons\", \"mail\"),\r\n                         div(tags$div(\"Email\", style=\"font-weight:700;\"),\r\n                             tags$div(\"you@example.com\", class=\"muted\"))))\r\n          ),\r\n          tags$br(), tags$br()\r\n      )\r\n  ),\r\n  \r\n  # ===== Works =====\r\n  div(id=\"works\", class=\"container\",\r\n      div(class=\"fade-pane\",\r\n          tags$h4(tags$i(class=\"material-icons\", \"work\"), \" 作品・研究\"),\r\n          div(class=\"row\",\r\n              div(class=\"col s12 m6\",\r\n                  div(class=\"card hoverable\",\r\n                      div(class=\"card-image\",\r\n                          tags$img(src=\"https://picsum.photos/800/400?random=12\"),\r\n                          span(class=\"card-title\", \"LNRE 可視化ダッシュボード\")\r\n                      ),\r\n                      div(class=\"card-content\",\r\n                          p(\"zipfR を用いた語彙成長曲線、有限母集団を想定した飽和到達点推定など。\")\r\n                      ),\r\n                      div(class=\"card-action\",\r\n                          tags$a(href=\"#contact\", class=\"teal-text text-darken-2\", \"お問い合わせへ\")\r\n                      )\r\n                  )\r\n              ),\r\n              div(class=\"col s12 m6\",\r\n                  div(class=\"card hoverable\",\r\n                      div(class=\"card-image\",\r\n                          tags$img(src=\"https://picsum.photos/800/400?random=22\"),\r\n                          span(class=\"card-title\", \"再捕獲法の指標比較\")\r\n                      ),\r\n                      div(class=\"card-content\",\r\n                          p(\"Chapman推定・Schnabelなど複数指標の比較用小ツール。\")\r\n                      ),\r\n                      div(class=\"card-action\",\r\n                          tags$a(href=\"https://your-portfolio.example\", target=\"_blank\", \"Portfolio\"),\r\n                          tags$span(\"　\"),\r\n                          tags$a(href=\"https://github.com/castella3\", target=\"_blank\", \"GitHub\")\r\n                      )\r\n                  )\r\n              )\r\n          )\r\n      )\r\n  ),\r\n  \r\n  # ===== About =====\r\n  div(id=\"about\", class=\"container\",\r\n      div(class=\"fade-pane\",\r\n          tags$h4(tags$i(class=\"material-icons\", \"person\"), \" 自己紹介\"),\r\n          p(\"専修大学（心理統計）M2。自由記述調査の飽和を定量化する研究に従事。再捕獲法（Toyoda et al., 2013）と LNRE（fZM）を比較し、R/Shiny・Stanで可視化。\"),\r\n          tags$ul(\r\n            tags$li(\"語彙成長曲線（VGC）・EV曲線の解析\"),\r\n            tags$li(\"有限母集団を前提とした飽和率推定\"),\r\n            tags$li(\"スロープしきい値（例：0.05）による到達判定\"),\r\n            tags$li(\"質的データの定量化・可視化\")\r\n          )\r\n      )\r\n  ),\r\n  \r\n  # ===== Contact（重複ラベルなし） =====\r\n  div(id=\"contact\", class=\"container\",\r\n      div(class=\"fade-pane\",\r\n          tags$h4(tags$i(class=\"material-icons\", \"send\"), \" お問い合わせ\"),\r\n          div(class=\"row\",\r\n              div(class=\"input-field col s12 m6\",\r\n                  textInput(\"name\", label = \"お名前\", placeholder = \"山田 太郎\")\r\n              ),\r\n              div(class=\"input-field col s12 m6\",\r\n                  textInput(\"email\", label = \"メール\", placeholder = \"you@example.com\")\r\n              )\r\n          ),\r\n          div(class=\"input-field col s12\",\r\n              textAreaInput(\"msg\", label = \"メッセージ\", value = \"\", rows = 5, placeholder = \"ご用件をどうぞ\")\r\n          ),\r\n          actionButton(\r\n            \"send\",\r\n            label = tagList(tags$i(class=\"material-icons left\", \"send\"), \" 送信（ダミー）\"),\r\n            class  = \"btn waves-effect waves-light teal\"\r\n          ),\r\n          tags$pre(id=\"preview\", class=\"site-footer\", \" \")\r\n      )\r\n  ),\r\n  \r\n  # ===== FAB =====\r\n  div(class=\"fixed-action-btn\",\r\n      tags$a(class=\"btn-floating btn-large teal\", href=\"#home\",\r\n             tags$i(class=\"large material-icons\", \"arrow_upward\"))\r\n  )\r\n)\r\n\r\nserver <- function(input, output, session) {\r\n  observeEvent(input$send, {\r\n    session$sendCustomMessage(\"setPreviewJS\", list(\r\n      text = paste0(\"【送信プレビュー】\\n\",\r\n                    \"お名前: \", input$name, \"\\n\",\r\n                    \"メール: \", input$email, \"\\n\\n\",\r\n                    input$msg)\r\n    ))\r\n  })\r\n}\r\n\r\n# pre へ書き込むJS\r\nui <- tagList(\r\n  ui,\r\n  tags$script(HTML(\"\r\n    Shiny.addCustomMessageHandler('setPreviewJS', function(x){\r\n      var el = document.getElementById('preview');\r\n      if(el){ el.textContent = x.text || ''; }\r\n    });\r\n  \"))\r\n)\r\n\r\nshinyApp(ui, server)\r\n","type":"text"}]
